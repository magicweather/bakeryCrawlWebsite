---

---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="generator" content={Astro.generator} />
		<title>Bakery Crawl</title>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
		<style>
			body {
				margin: 0;
				padding: 0;
				font-family: Arial, sans-serif;
			}

			/* Simple scrollable content */
			.scroll-content {
				height: 250vh; /* Increased height to ensure 0% and 100% can be reached */
				width: 100%;
				position: relative;
				pointer-events: none; /* Allow clicks to pass through to markers */
			}

			html {
				overflow-x: hidden;
			}

			.mobile {
				background-color: #e0e0e0;
			}

			.desktop {
				background-color: black;
				color: white;
				text-align: center;
				display: flex;
				justify-content: center;
				align-items: center;
			}

			.desktop-message {
				font-size: 24px;
			}

			#map {
				height: calc(100vh - 62px);
				width: calc(100% - 8px);
				position: fixed;
				top: 30px;
				left: 4px;
			}

			.map-overlay {
				position: fixed;
				top: 30px;
				left: 4px;
				width: calc(100% - 8px);
				height: calc(100vh - 62px);
				background-color: rgba(0, 0, 0, 0.4);
				z-index: 500;
				transition: opacity 0.3s ease;
				pointer-events: none; /* Allow clicks to pass through to markers */
			}

			.windows-frame {
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				pointer-events: none;
				z-index: 2000;
			}

			.window-border {
				position: absolute;
				background: #e0e0e0;
				border-top: 2px solid #ffffff;
				border-left: 2px solid #ffffff;
				border-right: 2px solid #a0a0a0;
				border-bottom: 2px solid #a0a0a0;
			}

			.window-border.top {
				top: 0;
				left: 0;
				width: 100%;
				height: 30px;
			}

			.window-border.left {
				top: 30px;
				left: 0;
				width: 4px;
				height: calc(100vh - 62px);
			}

			.window-border.right {
				top: 30px;
				right: 0;
				width: 4px;
				height: calc(100vh - 62px);
			}

			.window-border.bottom {
				position: fixed;
				bottom: -1px;
				left: 0;
				width: 100vw;
				height: 42px;
				z-index: 2001;
			}

			.window-title-bar {
				position: absolute;
				top: 2px;
				left: 2px;
				width: calc(100% - 4px);
				height: 26px;
				background: #848484;
				color: white;
				font-family: 'MS Sans Serif', sans-serif;
				font-size: 11px;
				font-weight: normal;
				display: flex;
				align-items: center;
				padding: 0 8px;
				box-sizing: border-box;
			}

			.window-controls {
				margin-left: auto;
				display: flex;
				gap: 2px;
			}

			.window-button {
				width: 16px;
				height: 14px;
				background: #e0e0e0;
				border-top: 1px solid #ffffff;
				border-left: 1px solid #ffffff;
				border-right: 1px solid #a0a0a0;
				border-bottom: 1px solid #a0a0a0;
				font-size: 8px;
				display: flex;
				align-items: center;
				justify-content: center;
				color: black;
				font-weight: bold;
				font-family: 'MS Sans Serif', sans-serif;
			}

			.window-status-bar {
				position: fixed;
				bottom: 8px;
				left: 2px;
				width: calc(100vw - 4px);
				height: 32px;
				background: #e0e0e0;
				border-top: 1px solid #a0a0a0;
				border-left: 1px solid #a0a0a0;
				border-right: 1px solid #ffffff;
				border-bottom: 1px solid #ffffff;
				font-family: 'MS Sans Serif', sans-serif;
				font-size: 11px;
				font-weight: normal;
				display: flex;
				align-items: center;
				padding: 0 6px;
				color: #000000;
				box-sizing: border-box;
				z-index: 2002;
				gap: 10px;
			}

			.progress-container {
				flex: 1;
				height: 18px;
				background: #c0c0c0;
				border-top: 1px solid #808080;
				border-left: 1px solid #808080;
				border-right: 1px solid #dfdfdf;
				border-bottom: 1px solid #dfdfdf;
				padding: 2px;
				box-sizing: border-box;
				position: relative;
				display: flex;
				align-items: center;
				justify-content: center;
			}

			.progress-blocks {
				position: absolute;
				left: 2px;
				top: 2px;
				height: calc(100% - 4px);
				width: calc(100% - 4px);
				display: flex;
				gap: 1px;
			}

			.progress-block {
				flex: 1;
				height: 100%;
				background: #c0c0c0;
				transition: background-color 0.1s ease;
			}

			.progress-block.filled {
				background: #4a90e2;
			}

			.progress-text {
				font-family: 'MS Sans Serif', sans-serif;
				font-size: 9px;
				font-weight: bold;
				color: #000000;
				text-shadow: 1px 1px 0px rgba(255,255,255,0.5);
				position: relative;
				z-index: 1;
			}

			/* Fullscreen Dialog Styles */
			.fullscreen-dialog-overlay {
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				background: rgba(0, 0, 0, 0.5);
				display: none;
				align-items: center;
				justify-content: center;
				z-index: 9999;
			}

			.fullscreen-dialog {
				width: 400px;
				background: #c0c0c0;
				border-top: 2px solid #ffffff;
				border-left: 2px solid #ffffff;
				border-right: 2px solid #808080;
				border-bottom: 2px solid #808080;
				font-family: 'MS Sans Serif', sans-serif;
				box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
			}

			.dialog-title-bar {
				background: #3b4dcb;
				color: white;
				height: 32px;
				display: flex;
				align-items: center;
				justify-content: space-between;
				padding: 8px 16px;
				font-size: 14px;
				font-weight: bold;
				font-family: 'MS Sans Serif', sans-serif;
			}

			.dialog-controls {
				display: flex;
			}

			.dialog-button {
				width: 16px;
				height: 14px;
				background: #c0c0c0;
				border-top: 1px solid #ffffff;
				border-left: 1px solid #ffffff;
				border-right: 1px solid #808080;
				border-bottom: 1px solid #808080;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 8px;
				color: black;
				cursor: pointer;
				font-weight: bold;
			}

			.dialog-button:active {
				border-top: 1px solid #808080;
				border-left: 1px solid #808080;
				border-right: 1px solid #ffffff;
				border-bottom: 1px solid #ffffff;
			}

			.dialog-content {
				padding: 12px;
				display: flex;
				gap: 8px;
				align-items: flex-start;
			}

			.dialog-icon {
				flex-shrink: 0;
				font-size: 16px;
				line-height: 1.2;
				margin-top: 2px;
			}

			.monitor-icon {
				width: 32px;
				height: 32px;
				position: relative;
			}

			.monitor-icon .screen {
				width: 28px;
				height: 20px;
				background: #008080;
				border: 2px solid #404040;
				border-radius: 2px;
			}

			.monitor-icon .base {
				width: 20px;
				height: 6px;
				background: #808080;
				margin: 2px auto 0;
				border-radius: 0 0 4px 4px;
			}

			.croissant-icon {
				width: 32px;
				height: 32px;
				position: relative;
				display: flex;
				align-items: center;
				justify-content: center;
			}

			.croissant-icon .croissant-emoji {
				font-size: 24px;
				line-height: 1;
			}

			.dialog-text {
				flex: 1;
				font-size: 11px;
				line-height: 1.4;
				color: #000000;
				margin-top: 0;
			}

			.dialog-text h3 {
				margin: 0 0 6px 0;
				font-size: 12px;
				font-weight: bold;
				line-height: 1.2;
			}

			.dialog-buttons {
				display: flex;
				gap: 8px;
				justify-content: flex-end;
				margin-top: 20px;
			}

			.dialog-btn {
				min-width: 80px;
				height: 24px;
				background: #c0c0c0;
				border-top: 1px solid #ffffff;
				border-left: 1px solid #ffffff;
				border-right: 1px solid #808080;
				border-bottom: 1px solid #808080;
				font-family: 'MS Sans Serif', sans-serif;
				font-size: 11px;
				color: #000000;
				cursor: pointer;
				padding: 0 8px;
			}

			.dialog-btn:active {
				border-top: 1px solid #808080;
				border-left: 1px solid #808080;
				border-right: 1px solid #ffffff;
				border-bottom: 1px solid #ffffff;
			}

			.dialog-btn.primary {
				font-weight: bold;
				border: 2px solid #000000;
				background: #c0c0c0;
			}

			.dialog-buttons-vertical {
				display: flex;
				flex-direction: column;
				gap: 8px;
				padding: 16px;
				padding-top: 0;
				align-items: center;
			}

			.dialog-btn.full-width {
				width: 220px;
				justify-content: center;
				text-align: center;
			}

			/* Hide default Leaflet attribution */
			.leaflet-control-attribution {
				display: none !important;
			}
			
			/* Custom attribution overlay */
			#custom-attribution {
				position: fixed;
				bottom: 50px;
				right: 12px;
				z-index: 9999;
				background: rgba(255, 255, 255, 0.95);
				color: #000000;
				font-family: 'MS Sans Serif', sans-serif;
				font-size: 10px;
				border: 1px solid #808080;
				padding: 3px 6px;
				pointer-events: auto;
			}
			
			#custom-attribution a {
				color: #0000EE;
				text-decoration: underline;
			}
			
			#custom-attribution a:visited {
				color: #551A8B;
			}

			/* SVG Bakery Markers */
			.svg-marker-icon {
				z-index: 9999 !important; /* Way above Hackney boundary and other elements */
				cursor: pointer !important;
			}

			.svg-marker-icon svg {
				transition: transform 0.3s ease-out; /* Smooth scaling animation */
			}

			.svg-marker-icon:hover svg {
				filter: brightness(1.1); /* Slight brightness increase on hover */
			}

			.svg-marker-icon:active svg {
				filter: brightness(0.9); /* Slight dimming when clicked */
			}


			/* Disable scrolling during popup sequence */
			.scroll-disabled {
				overflow: hidden !important;
				position: fixed !important;
				width: 100% !important;
				height: 100% !important;
			}

			/* Recommendations Dialog Styles */
			.recommendations-dialog {
				width: 90vw;
				max-width: 600px;
				max-height: 80vh;
				display: flex;
				flex-direction: column;
			}

			.recommendations-content {
				padding: 16px 20px 12px 20px;
				background: #e8e8e8;
				border-bottom: 2px solid #cccccc;
			}

			.recommendations-list {
				flex: 1;
				overflow-y: auto;
				padding: 0;
				max-height: 60vh;
				background: #e8e8e8;
			}

			:global(.recommendation-item) {
				display: flex !important;
				align-items: center !important;
				gap: 16px !important;
				padding: 16px 20px !important;
				border-bottom: 1px solid #cccccc !important;
				font-family: 'MS Sans Serif', sans-serif !important;
				background: #e8e8e8 !important;
			}

			.recommendation-item:last-child {
				border-bottom: none;
			}

			div.bakery-number,
			div.recommendation-item div.bakery-number,
			.recommendations-list div.bakery-number,
			#recommendations-popup .recommendations-list .recommendation-item .bakery-number,
			#recommendations-popup .fullscreen-dialog .recommendations-dialog .recommendations-list .recommendation-item .bakery-number,
			.fullscreen-dialog-overlay .fullscreen-dialog .recommendations-list .recommendation-item .bakery-number,
			.recommendations-list .recommendation-item .bakery-number,
			.recommendation-item .bakery-number,
			.bakery-number {
				width: 36px !important;
				height: 36px !important;
				background: #4a9eff !important;
				color: white !important;
				border-radius: 50% !important;
				display: flex !important;
				align-items: center !important;
				justify-content: center !important;
				font-weight: bold !important;
				font-size: 16px !important;
				flex-shrink: 0 !important;
				margin: 0 !important;
				min-width: 36px !important;
				max-width: 36px !important;
				text-align: center !important;
				line-height: 1 !important;
				font-family: 'MS Sans Serif', sans-serif !important;
				box-sizing: border-box !important;
			}

			:global(.bakery-details) {
				flex: 1;
			}

			:global(.bakery-details h4) {
				margin: 0 0 6px 0;
				font-size: 13px;
				font-weight: bold;
				color: #000000;
				line-height: 1.2;
			}

			:global(.bakery-details p) {
				margin: 0;
				font-size: 11px;
				line-height: 1.4;
				color: #000000;
			}

			/* Floating recommendations button */
			.floating-recommendations-btn {
				position: fixed;
				bottom: 52px; /* Moved lower to avoid covering Leaflet attribution */
				left: 8px; /* Slightly closer to edge */
				z-index: 9998; /* Just below custom attribution */
				background: #c0c0c0; /* Windows NT4 grey background */
				color: #000000;
				font-family: 'MS Sans Serif', sans-serif;
				font-size: 9px; /* Smaller font */
				border: 1px solid #808080;
				padding: 4px 8px; /* Smaller padding */
				cursor: pointer;
				pointer-events: auto;
				white-space: nowrap;
				display: inline-block;
				min-width: 140px; /* Smaller minimum width */
				text-align: center;
				transition: background-color 0.1s ease;
			}

			.floating-recommendations-btn:hover {
				background: #d0d0d0;
			}

			.floating-recommendations-btn:active {
				background: #a0a0a0;
			}
			/* FINAL OVERRIDE - Blue circular badges for recommendations */
			:global(.bakery-number) {
				width: 36px !important;
				height: 36px !important;
				background: #4a9eff !important;
				color: white !important;
				border-radius: 50% !important;
				display: flex !important;
				align-items: center !important;
				justify-content: center !important;
				font-weight: bold !important;
				font-size: 16px !important;
				flex-shrink: 0 !important;
				margin: 0 !important;
				text-align: center !important;
				line-height: 1 !important;
				font-family: 'MS Sans Serif', sans-serif !important;
				box-sizing: border-box !important;
			}

			/* Starting Bakery Dialog Styles */
			.starting-bakery-dialog {
				width: 90vw;
				max-width: 500px;
			}

			.starting-bakery-content {
				flex-direction: column;
				padding: 16px;
				align-items: center;
			}

			.bakery-image {
				width: 100%;
				max-width: 300px;
				margin-bottom: 16px;
				border: 2px solid #808080;
				border-top-color: #ffffff;
				border-left-color: #ffffff;
				border-right-color: #404040;
				border-bottom-color: #404040;
			}

			.bakery-image img {
				width: 100%;
				height: auto;
				display: block;
				max-height: 200px;
				object-fit: cover;
			}

			.starting-bakery-content .dialog-text {
				text-align: center;
				margin-top: 0;
			}

			.starting-bakery-content .dialog-text h3 {
				color: #000000;
				font-size: 14px;
				font-weight: bold;
				margin-bottom: 8px;
			}

			.starting-bakery-content .dialog-text p {
				color: #000000;
				font-size: 11px;
				line-height: 1.4;
				margin: 6px 0;
			}

			.starting-bakery-content .google-maps-link {
				margin-top: 12px;
			}
		</style>
	</head>
	<body>
		<!-- Fullscreen Dialog Popup -->
		<div id="fullscreen-dialog" class="fullscreen-dialog-overlay">
			<div class="fullscreen-dialog">
				<div class="dialog-title-bar">
					<span>Bakery Crawl - Fullscreen Experience</span>
					<div class="dialog-controls">
						<div class="dialog-button close-btn">×</div>
					</div>
				</div>
				<div class="dialog-content">
					<div class="dialog-icon">
						<div class="monitor-icon">
							<div class="screen"></div>
							<div class="base"></div>
						</div>
					</div>
					<div class="dialog-text">
						This is a fullscreen experience.<br>
						Click "Enter Fullscreen" for the best viewing experience.
					</div>
					<div class="dialog-buttons">
						<button id="enter-fullscreen-btn" class="dialog-btn primary">Enter Fullscreen</button>
						<button id="skip-fullscreen-btn" class="dialog-btn">Skip</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Welcome Dialog Popup -->
		<div id="welcome-dialog" class="fullscreen-dialog-overlay">
			<div class="fullscreen-dialog">
				<div class="dialog-title-bar">
					<span>Welcome to Bakery Crawl</span>
					<div class="dialog-controls">
						<div class="dialog-button welcome-close-btn">×</div>
					</div>
				</div>
				<div class="dialog-content">
					<div class="dialog-icon">
						<div class="croissant-icon">
							<div class="croissant-emoji">🥐</div>
						</div>
					</div>
					<div class="dialog-text">
						Welcome to Bakery Crawl: Hackney Version<br>
						Explore London's finest bakeries through this interactive journey.
					</div>
				</div>
				<div class="dialog-buttons-vertical">
					<button id="start-journey-btn" class="dialog-btn primary full-width">Start Journey, Scroll Around 😊</button>
					<button id="move-recommendations-btn" class="dialog-btn full-width">Move to Recommendations</button>
					<button id="starting-bakery-btn" class="dialog-btn full-width">Starting Bakery Details</button>
				</div>
			</div>
		</div>

		<div id="desktop-message" class="desktop-message" style="display: none;">
			Please open the website on your mobile phone
		</div>

		<div id="mobile-content" style="display: none;">
			<div class="windows-frame">
				<div class="window-border top">
					<div class="window-title-bar">
						<span>Bakery Crawl - Internet Explorer</span>
						<div class="window-controls">
							<div class="window-button">_</div>
							<div class="window-button">□</div>
							<div class="window-button">×</div>
						</div>
					</div>
				</div>
				<div class="window-border left"></div>
				<div class="window-border right"></div>
				<div class="window-border bottom">
					<div class="window-status-bar">
						<span>Ready</span>
						<div class="progress-container">
							<div class="progress-blocks">
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
								<div class="progress-block"></div>
							</div>
							<div class="progress-text" id="progress-text">0%</div>
						</div>
					</div>
				</div>
			</div>
			
			<div id="map"></div>
			<div class="map-overlay"></div>
			<div class="scroll-content"></div>
			
			<!-- Custom attribution overlay -->
			<div id="custom-attribution">
				<a href="https://leafletjs.com" target="_blank">Leaflet</a> | © <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors
			</div>
			
			<!-- Floating recommendations button -->
			<div id="recommendations-button" class="floating-recommendations-btn" style="display: none;" data-show-recommendations>
				🥐 View All Recommendations
			</div>
		</div>

		<!-- Bakery Info Popup -->
		<div id="bakery-popup" class="fullscreen-dialog-overlay">
			<div class="fullscreen-dialog">
				<div class="dialog-title-bar">
					<span id="bakery-popup-title">Bakery Information</span>
					<div class="dialog-controls">
						<div class="dialog-button" data-close-bakery>×</div>
					</div>
				</div>
				<div class="dialog-content">
					<div class="dialog-icon">🥖</div>
					<div class="dialog-text">
						<h3 id="bakery-name-display">Bakery Name</h3>
						<p id="bakery-recommendation">Our recommendation will appear here...</p>
						<div class="google-maps-link">
							<a id="bakery-maps-link" href="#" target="_blank" style="color: #0000FF; text-decoration: underline;">📍 View on Google Maps</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Starting Bakery Popup -->
		<div id="starting-bakery-popup" class="fullscreen-dialog-overlay">
			<div class="fullscreen-dialog starting-bakery-dialog">
				<div class="dialog-title-bar">
					<span>🏁 Starting Point - FORNO</span>
					<div class="dialog-controls">
						<div class="dialog-button" data-close-starting-bakery>×</div>
					</div>
				</div>
				<div class="dialog-content starting-bakery-content">
					<div class="bakery-image">
						<img src="/forno_starting_point.png" alt="FORNO Bakery" id="forno-image">
					</div>
					<div class="dialog-text">
						<h3>Welcome to your Bakery Crawl starting point!</h3>
						<div class="google-maps-link">
							<a href="https://maps.app.goo.gl/JoYPajGDfoS99fMA9" target="_blank" style="color: #0000FF; text-decoration: underline;">📍 Get Directions to Starting Point</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Recommendations Popup -->
		<div id="recommendations-popup" class="fullscreen-dialog-overlay">
			<div class="fullscreen-dialog recommendations-dialog">
				<div class="dialog-title-bar">
					<span>Bakery Crawl - All Recommendations</span>
					<div class="dialog-controls">
						<div class="dialog-button" data-close-recommendations>×</div>
					</div>
				</div>
				<div class="dialog-content recommendations-content">
					<div class="dialog-icon">
						<div class="croissant-icon">
							<div class="croissant-emoji">🥐</div>
						</div>
					</div>
					<div class="dialog-text">
						<h3>All Bakery Recommendations</h3>
						<p>Here are our curated recommendations for each stop on the Hackney Bakery Crawl:</p>
					</div>
				</div>
				<div class="recommendations-list">
					<!-- Recommendations will be populated dynamically by JavaScript -->
				</div>
			</div>
		</div>

		<script src="/src/scripts/main.js"></script>
	</body>
</html>
